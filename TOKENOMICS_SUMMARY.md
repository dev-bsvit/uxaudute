# üìä –¢–û–ö–ï–ù–û–ú–Ü–ö–ê - –ö–û–†–û–¢–ö–ò–ô –û–ü–ò–°

**–í–µ—Ä—Å—ñ—è**: 2.0 (–¢—ñ–ª—å–∫–∏ LiqPay)
**–î–∞—Ç–∞**: 01.12.2025

---

## ‚úÖ –©–û –ó–†–û–ë–õ–ï–ù–û

### 1. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥** ‚úì
üìÅ –§–∞–π–ª: [src/config/tokenomics.config.ts](src/config/tokenomics.config.ts)

**–í—Å—ñ —Ü—ñ–Ω–∏ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ!** –ó–º—ñ–Ω—é–π—Ç–µ —Ç—É—Ç:
- –í–∞—Ä—Ç—ñ—Å—Ç—å –∞—É–¥–∏—Ç—ñ–≤
- –ü–∞–∫–µ—Ç–∏ –∫—Ä–µ–¥–∏—Ç—ñ–≤
- –ü–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–æ–∫

### 2. **–û–Ω–æ–≤–ª–µ–Ω—ñ —Ü—ñ–Ω–∏ –∞—É–¥–∏—Ç—ñ–≤** ‚úì

| –¢–∏–ø | –ö—Ä–µ–¥–∏—Ç–∏ | –ó–º—ñ–Ω–∏ |
|-----|---------|-------|
| Research | 2 | - |
| AB Test | 1 | ‚Üì –±—É–ª–æ 3 |
| Business | 1 | ‚Üì –±—É–ª–æ 4 |
| Hypotheses | 1 | - |
| Survey | 1 | ‚ú® –Ω–æ–≤–∏–π |
| All Audits | 4 | ‚ú® –Ω–æ–≤–∏–π |

üìÅ –ú—ñ–≥—Ä–∞—Ü—ñ—è: [supabase/migrations/update_tokenomics_v2.sql](supabase/migrations/update_tokenomics_v2.sql)

### 3. **–ü–∞–∫–µ—Ç–∏ –∫—Ä–µ–¥–∏—Ç—ñ–≤ (LiqPay)** ‚úì

| –ü–∞–∫–µ—Ç | –ö—Ä–µ–¥–∏—Ç–∏ | –¶—ñ–Ω–∞ |
|-------|---------|------|
| Basic | 10 | 80‚Ç¥ |
| Pro ‚≠ê | 50 | 360‚Ç¥ |
| Team | 200 | 1200‚Ç¥ |

### 4. **–°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥–ø–∏—Å–æ–∫** ‚úì

| –ü–ª–∞–Ω | –ü–µ—Ä—ñ–æ–¥ | –¶—ñ–Ω–∞ | –î–µ–Ω–Ω–∏–π –ª—ñ–º—ñ—Ç |
|------|--------|------|--------------|
| Monthly Basic | –º—ñ—Å—è—Ü—å | 400‚Ç¥ | 10 –∑–∞–ø–∏—Ç—ñ–≤ |
| Monthly Pro | –º—ñ—Å—è—Ü—å | 800‚Ç¥ | 25 –∑–∞–ø–∏—Ç—ñ–≤ |
| Yearly Basic | —Ä—ñ–∫ | 4000‚Ç¥ | 10 –∑–∞–ø–∏—Ç—ñ–≤ |
| Yearly Pro | —Ä—ñ–∫ | 8000‚Ç¥ | 25 –∑–∞–ø–∏—Ç—ñ–≤ |

üìÅ –ú—ñ–≥—Ä–∞—Ü—ñ—è: [supabase/migrations/create_subscriptions_table.sql](supabase/migrations/create_subscriptions_table.sql)

**–ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**:
- ‚úÖ –ö—Ä–µ–¥–∏—Ç–∏ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω—ñ
- ‚úÖ –§—ñ–∫—Å–æ–≤–∞–Ω–∏–π –¥–µ–Ω–Ω–∏–π –ª—ñ–º—ñ—Ç
- ‚úÖ –í—Å—ñ —Ç–∏–ø–∏ –∞—É–¥–∏—Ç—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω—ñ
- ‚úÖ –õ—ñ–º—ñ—Ç —Å–∫–∏–¥–∞—î—Ç—å—Å—è —â–æ–¥–Ω—è

### 5. **LiqPay —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** ‚úì

üìÅ –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞: [src/lib/liqpay.ts](src/lib/liqpay.ts)

**API —Ä–æ—É—Ç–∏**:
- `POST /api/liqpay/create-payment` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É
- `POST /api/liqpay/webhook` - –æ–±—Ä–æ–±–∫–∞ webhook

**–¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º**: sandbox –∫–ª—é—á—ñ –≤ `.env`

### 6. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö** ‚úì

**–ù–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ**:
- `subscriptions` - –∞–∫—Ç–∏–≤–Ω—ñ –ø—ñ–¥–ø–∏—Å–∫–∏
- `subscription_usage` - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞ –¥–µ–Ω—å
- `payment_orders` - –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

**RPC —Ñ—É–Ω–∫—Ü—ñ—ó**:
- `has_active_subscription(user_id)` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å–∫–∏
- `check_daily_limit(user_id)` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–µ–Ω–Ω–æ–≥–æ –ª—ñ–º—ñ—Ç—É
- `increment_subscription_usage(user_id, audit_type)` - +1 –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

---

## üöÄ –Ø–ö –ö–û–†–ò–°–¢–£–í–ê–¢–ò–°–Ø

### –ó–º—ñ–Ω–∏—Ç–∏ —Ü—ñ–Ω–∏

**1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥:**
```bash
src/config/tokenomics.config.ts
```

**2. –ó–º—ñ–Ω—ñ—Ç—å —Ü—ñ–Ω—É:**
```typescript
pro: {
  credits: 50,
  priceUAH: 360,  // ‚Üê –ó–º—ñ–Ω—ñ—Ç—å —Ç—É—Ç
  // ...
}
```

**3. –û–Ω–æ–≤—ñ—Ç—å –ë–î** (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ):
```sql
UPDATE audit_credits SET credits_cost = 1 WHERE audit_type = 'ab_test';
```

### –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó

```bash
# –ß–µ—Ä–µ–∑ Supabase CLI
supabase db push

# –ê–±–æ –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ SQL Editor –≤ Supabase Dashboard
```

**–ü–æ—Ä—è–¥–æ–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π**:
1. ‚úÖ `create_credits_tables.sql` - –±–∞–∑–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ (–≤–∂–µ —î)
2. ‚úÖ `create_credits_rpc_functions.sql` - RPC —Ñ—É–Ω–∫—Ü—ñ—ó (–≤–∂–µ —î)
3. ‚ú® `update_tokenomics_v2.sql` - **–ù–û–í–ê** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–Ω
4. ‚ú® `create_subscriptions_table.sql` - **–ù–û–í–ê** - –ø—ñ–¥–ø–∏—Å–∫–∏
5. ‚ú® `create_payment_orders_table.sql` - **–ù–û–í–ê** - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

### –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ LiqPay

**1. –û—Ç—Ä–∏–º–∞–π—Ç–µ –∫–ª—é—á—ñ**: https://www.liqpay.ua/

**2. –î–æ–¥–∞–π—Ç–µ –≤ `.env.local`:**
```env
LIQPAY_PUBLIC_KEY=your_public_key
LIQPAY_PRIVATE_KEY=your_private_key
```

**3. –¢–µ—Å—Ç–æ–≤—ñ –∫–∞—Ä—Ç–∫–∏:**
- –£—Å–ø—ñ—à–Ω–∏–π –ø–ª–∞—Ç—ñ–∂: `4242424242424242`
- –ù–µ—É—Å–ø—ñ—à–Ω–∏–π: `4100000000000000`

---

## üìù –©–û –ó–ê–õ–ò–®–ò–õ–û–°–Ø –ó–†–û–ë–ò–¢–ò

### –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

- [ ] –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç CreditsPurchase –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ LiqPay
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É `/subscription` –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–æ—é
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø—ñ–¥–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–Ω—è–º –∫—Ä–µ–¥–∏—Ç—ñ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ LiqPay –≤ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ

---

## üìû –í–ê–ñ–õ–ò–í–Ü –§–ê–ô–õ–ò

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- `src/config/tokenomics.config.ts` - **–ì–û–õ–û–í–ù–ò–ô –ö–û–ù–§–Ü–ì**
- `.env.example` - –ø—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- `src/lib/liqpay.ts` - —Ä–æ–±–æ—Ç–∞ –∑ LiqPay
- `src/lib/credits.ts` - —Ä–æ–±–æ—Ç–∞ –∑ –∫—Ä–µ–¥–∏—Ç–∞–º–∏

### API
- `src/app/api/liqpay/create-payment/route.ts` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É
- `src/app/api/liqpay/webhook/route.ts` - –æ–±—Ä–æ–±–∫–∞ webhook

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó
- `supabase/migrations/update_tokenomics_v2.sql`
- `supabase/migrations/create_subscriptions_table.sql`
- `supabase/migrations/create_payment_orders_table.sql`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `TOKENOMICS.md` - –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (–∞–Ω–≥–ª.)
- `TOKENOMICS_SUMMARY.md` - —Ü–µ–π —Ñ–∞–π–ª (—É–∫—Ä.)

---

## üîç –ü–ï–†–ï–í–Ü–†–ö–ê

### SQL –∑–∞–ø–∏—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å –∞—É–¥–∏—Ç—ñ–≤
SELECT * FROM audit_credits;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –±–∞–ª–∞–Ω—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
SELECT * FROM user_balances WHERE user_id = 'YOUR_USER_ID';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
SELECT * FROM transactions
WHERE user_id = 'YOUR_USER_ID'
ORDER BY created_at DESC LIMIT 10;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏
SELECT * FROM subscriptions WHERE user_id = 'YOUR_USER_ID';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
SELECT * FROM subscription_usage
WHERE user_id = 'YOUR_USER_ID'
AND usage_date = CURRENT_DATE;
```

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 01.12.2025
**–ê–≤—Ç–æ—Ä**: UX Audit Platform Team
