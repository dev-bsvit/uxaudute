# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Stripe –∫–ª—é—á–µ–π –∏–∑ Dashboard

## –ò–∑ –≤–∞—à–µ–≥–æ Stripe Dashboard

–£ –≤–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–ª—é—á–∏:
- **Publishable key**: `pk_test_51S6YAS340Mj5r...`
- **Secret key**: `sk_test_51S6YAS340Mj5r...`

## –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –∫–ª—é—á–µ–π

1. **–í Stripe Dashboard** –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–ª—é—á —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∫–ª—é—á
2. **Publishable key** –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `pk_test_` –∏–ª–∏ `pk_live_`
3. **Secret key** –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk_test_` –∏–ª–∏ `sk_live_`

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Vercel Dashboard** ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Settings ‚Üí Environment Variables

2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
   ```
   STRIPE_SECRET_KEY=sk_test_51S6YAS340Mj5r... (–ø–æ–ª–Ω—ã–π –∫–ª—é—á)
   NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51S6YAS340Mj5r... (–ø–æ–ª–Ω—ã–π –∫–ª—é—á)
   NEXT_PUBLIC_APP_URL=https://yourdomain.com
   ```

3. **–î–ª—è webhook** (–ø–æ–∑–∂–µ):
   ```
   STRIPE_WEBHOOK_SECRET=whsec_... (–±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ webhook)
   ```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π –≤ Vercel:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π** –≤ Vercel
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**:
   ```bash
   curl https://yourdomain.com/api/stripe/status
   ```

3. **–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å**:
   ```json
   {
     "environment": {
       "stripe_secret_key": true,
       "stripe_publishable_key": true,
       "app_url": true
     },
     "mode": {
       "secret_key_type": "test",
       "publishable_key_type": "test"
     }
   }
   ```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ Webhook

1. **–í Stripe Dashboard** ‚Üí Developers ‚Üí Webhooks
2. **Add endpoint**:
   - URL: `https://yourdomain.com/api/stripe/webhook`
   - Events: `payment_intent.succeeded`, `payment_intent.payment_failed`

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ webhook secret** –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ Vercel:
   ```
   STRIPE_WEBHOOK_SECRET=whsec_...
   ```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫—Ä–µ–¥–∏—Ç–æ–≤**: `https://yourdomain.com/credits`
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç** –∏ –Ω–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å"
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É**: `4242 4242 4242 4242`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤**

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏ –≤ –∫–æ–¥
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Test –∫–ª—é—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞**:
- –í—Å–µ –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω—ã–º–∏ (–Ω–µ –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–º–∏)
- Webhook –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—é—á–µ–π
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏

## Troubleshooting

### –ö–ª—é—á–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á–∏ –ø–æ–ª–Ω—ã–µ (–Ω–µ –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–µ)
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π –≤ Vercel

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook –≤ Stripe
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ webhook secret –¥–æ–±–∞–≤–ª–µ–Ω –≤ Vercel
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Stripe Dashboard

### –ü–ª–∞—Ç–µ–∂–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Functions
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ Stripe Dashboard
